version: 2.1

setup: true

orbs:
  path-filtering: circleci/path-filtering@0.1.3
  continuation: circleci/continuation@0.3.1

jobs:


workflows:
  generate-config:
    jobs:
      - path-filtering/filter:
          mapping: |
            packages/cli/.* cli true
            packages/local-api/.* local-api true
            packages/local-client/.* local-client true
          name: commit-filtering
          filters:
            branches:
              ignore: /^(main|staging)$/ 
            tags:
              ignore: /.*/
      - path-filtering/filter:
          mapping: |
            packages/cli/.* cli true
            packages/local-api/.* local-api true
            packages/local-client/.* local-client true
          name: staging-filtering
          filters:
            branches:
              only: /^(staging)$/
            tags:
              ignore: /.*/
      - continuation/continue:
          configuration_path: ./continuation-configs/deploy.yml
          filters:  
            tags:
              only: /.*/
            branches:
              only: /^(main)$/


# VS Code Extension Version: 1.0.0